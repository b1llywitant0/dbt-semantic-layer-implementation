version: 2

models:
  - name: base_crm_qualified_leads
    description: >
      Base model created from ReplacingMergeTree table of mv_qualified_leads with FINAL clause, to be snapshotted.
      Handled with full-refresh since the number of qualified leads is not that much.
    columns:
      - name: mql_id
        description: The primary key of the table. Indicating unique qualified lead.
        tests:
          - unique
          - not_null
      - name: landing_page_id
        description: Where the lead came from, based on landing page conversion.
        tests: 
          - not_null
      - name: origin_id
        description: Where the lead came from, based on marketing channels.
        tests:
          - relationships:
              to: source('crm','qualified_lead_origins')
              field: origin_id
      - name: created_at
        description: The timestamp of product creation.
        tests:
          - not_null
      - name: updated_at
        description: The timestamp of product update, including deletion.
        tests:
          - not_null
      - name: deleted
        description: Boolean indicating whether the data is deleted or not, either from soft-delete or hard-delete.
        tests:
          - not_null
          - accepted_values:
              values:
                - 0
                - 1
