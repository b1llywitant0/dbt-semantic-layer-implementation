version: 2

models:
  - name: stg_crm__qualified_leads
    descriptions: Staging data of qualified leads in SCD2 format. The primary key is the combination of 'mql_id' and 'valid_from'.
    tests:
      - dbt_utils.unique_combination_of_columns:
          combination_of_columns:
            - mql_id
            - valid_from
    columns:
      - name: mql_id
        description: Indicating unique qualified lead.
        tests:
          - not_null
      - name: landing_page_id
        description: Where the lead came from, based on landing page conversion.
        tests: 
          - not_null
      - name: channel
        description: Where the lead came from, based on marketing channels.
      - name: deleted
        description: Boolean indicating whether the data is deleted or not, either from soft-delete or hard-delete.
        tests:
          - not_null
          - accepted_values:
              values:
                - 0
                - 1
      - name: valid_from
        description: Timestamp indicating the start of period.
        tests:
          - not_null
      - name: valid_to
        description: Timestamp indicating the end of period.
        tests:
          - not_null
